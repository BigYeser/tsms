import{p as k}from"./pickBy.99090881.js";import{L as M}from"./Layout.64048865.js";import{t as C}from"./throttle.25f0f559.js";import{S as V,m as T}from"./SearchFilter.1f0d585c.js";import{P as j}from"./Pagination.f66bf9cf.js";import{M as B}from"./Modal.abced495.js";import N from"./Show.487e673c.js";import{_ as O,r as c,o as m,c as d,a as s,t as r,b as i,e as b,F as A,j as L,d as h,h as S,f as $}from"./app.ded12ad0.js";import{m as D}from"./md5.2ef7b393.js";import"./debounce.ec11b2b4.js";import"./Dropdown.7107bc23.js";import"./FlashMessages.c9894c42.js";const I={layout:M,components:{Pagination:j,SearchFilter:V,Modal:B,MeasurementComponent:N},props:{measurements:Object,filters:Object},metaInfo(){return{title:this.$tc("Measurement",2)}},data(){return{form:{search:this.filters.search,trashed:this.filters.trashed},sending:!1,confirm:!1,send_sms:!1,emailing:!1,message:null,dialogButtonText:null,dialogAction:null,dialogTitle:null,dialogBody:null,viewMeasurement:!1,service:{value:this.measurement.service.id,label:this.measurement.service.name,measurement_fields:this.measurement.service.measurement_fields},customer:{label:this.measurement.customer.name,value:this.measurement.customer.id},services:[],customers:[]}},watch:{form:{handler:C(function(){let e=k(this.form);this.$inertia.replace(this.route("measurements",Object.keys(e).length?e:{remember:"forget"}))},250),deep:!0},customer:function(e,t){this.form.customer_id=e?e.value:null,(!this.form.name||this.service&&this.form.name==this.service.label||this.form.name==(t?t.label+"'s ":"")+(this.service?this.service.label:""))&&(this.form.name=(e?e.label:"")+(this.service?"'s "+this.service.label:""))},service:function(e,t){this.form.service_id=e?e.value:null,(!this.form.name||this.customer&&this.form.name==this.customer.label||this.form.name==(this.customer?this.customer.label+"'s ":"")+(t?t.label:""))&&(this.form.name=(this.customer?this.customer.label+"'s ":"")+(e?e.label:"")),t&&t.measurement_fields.map(n=>{delete this.form[n.name]}),e&&e.measurement_fields.map(n=>{n.type=="Checkbox"?(this.form[n.name]={},n.options.map(f=>this.form[n.name][f.value]=!1)):this.form[n.name]=null})}},mounted(){this.customers=[this.customer],this.services=[...this.iservices,this.service]},methods:{rowClicked(e){fetch(this.route("measurements.show",[e.id,D.exports(e.name)])+"?ajax=1").then(t=>{t.json().then(n=>{this.measurement=n,this.viewMeasurement=!0})})},reset(){this.form=T(this.form,()=>null)},displayExtra(e){let t="";return Array.isArray(e)&&e.map((n,f)=>{for(let[l,a]of Object.entries(n))if(a&&a.includes("{")&&a.includes("}")&&a.includes(":")){t+=`<span class="inline-block"><strong>${l}</strong>: `;const _=JSON.parse(a);for(let[p,u]of Object.entries(_))u?t+=`<span class="inline-block text-green-600 ltr:mr-2 rtl:ml-2">&#10003; ${p},</span> `:t+=`<span class="inline-block text-red-500 ltr:mr-2 rtl:ml-2">&#10005; ${p},</span> `;t+="</span>"}else t+=`<span class="inline-block"><strong>${l}</strong>: ${a},</span> `}),t}}},F={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},P={class:"np mb-6 flex justify-between items-center"},E={class:"block text-gray-700"},R={class:"inline md:hidden"},U={class:"hidden md:inline"},q={class:"bg-white rounded shadow overflow-x-auto scroll-on-light"},J={class:"w-full whitespace-no-wrap leading-normal"},W={class:"text-left font-bold"},z={class:"px-6 pt-6 pb-4"},G={class:"px-6 pt-6 pb-4"},H={class:"px-6 pt-6 pb-4"},K={class:"px-6 pt-6 pb-4"},Q={class:"px-6 pt-6 pb-4"},X={class:"px-6 pt-6 pb-4",colspan:"2"},Y=["onClick"],Z={class:"border-t px-6 py-4 w-56"},ee={class:"flex items-center"},te={class:"border-t px-6 py-4 w-40"},se={key:0},oe={class:"border-t px-6 py-4 w-48"},le={key:0},ne={class:"border-t px-6 py-4 w-48"},re={key:0},ie={class:"border-t px-6 py-4 w-48"},ae={key:0},me={class:"border-t px-6 py-4 max-w-lg truncate"},ce={class:"border-t px-6 py-4 w-8"},de={key:0},he={class:"border-t px-6 py-4",colspan:"5"};function ue(e,t,n,f,l,a){const _=c("v-select"),p=c("search-filter"),u=c("Icons"),v=c("Link"),w=c("pagination"),y=c("MeasurementComponent"),x=c("Modal"),g=c("Dialog");return m(),d("div",null,[s("h1",F,r(e.$tc("Measurement",2)),1),s("div",P,[i(p,{modelValue:l.form.search,"onUpdate:modelValue":t[1]||(t[1]=o=>l.form.search=o),class:"w-full max-w-md ltr:mr-4 rtl:ml-4",onReset:a.reset},{default:b(()=>[s("label",E,r(e.$t("Trashed")),1),i(_,{modelValue:l.form.trashed,"onUpdate:modelValue":t[0]||(t[0]=o=>l.form.trashed=o),options:[{value:"",label:"Not Trashed"},{value:"with",label:e.$t("With Trashed")},{value:"only",label:e.$t("Only Trashed")}],reduce:o=>o.value},null,8,["modelValue","options","reduce"])]),_:1},8,["modelValue","onReset"]),i(v,{class:"btn-gray",href:e.route("measurements.create")},{default:b(()=>[s("span",R,[i(u,{name:"add",class:"w-4 h-4 fill-white group-hover:fill-white"})]),s("span",U,r(e.$t("create_x",{x:e.$tc("Measurement")})),1)]),_:1},8,["href"])]),s("div",q,[s("table",J,[s("thead",null,[s("tr",W,[s("th",z,r(e.$t("Name")),1),s("th",G,r(e.$tc("Service")),1),s("th",H,r(e.$tc("Customer")),1),s("th",K,r(e.$tc("Price")),1),s("th",Q,r(e.$tc("Appointment Time")),1),s("th",X,r(e.$t("Description")),1)])]),s("tbody",null,[(m(!0),d(A,null,L(n.measurements.data,o=>(m(),d("tr",{key:o.id,onClick:pe=>a.rowClicked(o),class:"cursor-pointer hover:bg-teal-200 focus-within:bg-teal-200"},[s("td",Z,[s("div",ee,[S(r(o.name)+" ",1),o.deleted_at?(m(),$(u,{key:0,name:"trash",class:"flex-shrink-0 w-3 h-3 fill-gray-400 ltr:ml-2 rtl:mr-2"})):h("",!0)])]),s("td",te,[o.service_id?(m(),d("div",se,r(o.service),1)):h("",!0)]),s("td",oe,[o.customer_id?(m(),d("div",le,r(o.customer),1)):h("",!0)]),s("td",ne,[o.price?(m(),d("div",re,r(o.price),1)):h("",!0)]),s("td",ie,[o.appointment?(m(),d("div",ae,r(o.appointment),1)):h("",!0)]),s("td",me,r(o.measurement),1),s("td",ce,[i(u,{name:"cheveron-right",class:"block w-6 h-6 fill-gray-400 rtl:rotate"})])],8,Y))),128)),n.measurements.data.length===0?(m(),d("tr",de,[s("td",he,r(e.$t("no_x_found",{x:e.$tc("Measurement")})),1)])):h("",!0)])])]),i(w,{links:n.measurements.links,meta:n.measurements.meta},null,8,["links","meta"]),i(x,{show:l.viewMeasurement,"max-width":"2xl",closeable:!0,onClose:t[3]||(t[3]=o=>l.viewMeasurement=!1)},{default:b(()=>[i(y,{measurement:e.measurement,onClose:t[2]||(t[2]=()=>l.viewMeasurement=!1)},null,8,["measurement"])]),_:1},8,["show"]),i(g,{show:l.message,content:l.message,close:()=>l.message=null},null,8,["show","content","close"]),i(g,{show:l.confirm,close:()=>l.confirm=!1,"action-text":l.dialogButtonText,action:l.dialogAction,title:l.dialogTitle,content:l.dialogBody},null,8,["show","close","action-text","action","title","content"])])}const Te=O(I,[["render",ue]]);export{Te as default};
