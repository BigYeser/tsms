import{g as A}from"./debounce.85ed00c8.js";import{T as q}from"./TextInput.d430b1a6.js";import{R as G}from"./RadioInput.760f0100.js";import{S as H}from"./SelectInput.eb4eed25.js";import{T as Q}from"./TextareaInput.0fbbd94e.js";import{C as W}from"./CheckboxInput.28268543.js";import{L as X}from"./LoadingButton.f8a49c16.js";import{D as Y}from"./DeleteRestoreComponent.9532428c.js";import{_ as Z,r as f,o as i,c as a,a as l,t as n,d,n as b,w as ee,b as c,m as se,D as re,F as _,j as g,e as O,f as w,h as te}from"./app.026c8781.js";import"./InputError.919b0f9c.js";import"./Dialog.cb01da31.js";import"./Modal.3182f545.js";const oe={components:{CheckboxInput:W,LoadingButton:X,RadioInput:G,SelectInput:H,TextInput:q,TextareaInput:Q,DeleteRestoreComponent:Y},props:{data:Object,ddData:{type:Object},modal:Boolean,action:Function,iservices:Array,icustomers:Array},data(){return{form:{name:null,service_id:null,customer_id:null,measurement:null,extra_attributes:[]},fields:null,services:[],customers:[],service:null,customer:null,loading:!1,sending:!1}},watch:{ddData:function(e){e&&(e.name&&(this.form.name=e.name),e.service&&(this.service=e.service,this.services.push(this.service),this.form.service_id=this.service.value,this.service.measurement_fields.map(s=>{s.type=="Checkbox"?(this.form[s.name]={},s.options.map(o=>this.form[s.name][o.value]=!1)):this.form[s.name]=null})),e.customer&&(this.customer=e.customer,this.customers=[this.customer],this.form.customer_id=this.customer.value))},customer:function(e,s){this.form.customer_id=e?e.value:null,(!this.form.name||this.service&&this.form.name==this.service.label||this.form.name==(s?s.label+"'s ":"")+(this.service?this.service.label:""))&&(this.form.name=(e?e.label:"")+(this.service?"'s "+this.service.label:""))},service:function(e,s){this.form.service_id=e?e.value:null,(!this.form.name||this.customer&&this.form.name==this.customer.label||this.form.name==(this.customer?this.customer.label+"'s ":"")+(s?s.label:""))&&(this.form.name=(this.customer?this.customer.label+"'s ":"")+(e?e.label:"")),s&&s.measurement_fields.map(o=>{delete this.form[o.name]}),e&&e.measurement_fields.map(o=>{o.type=="Checkbox"?(this.form[o.name]={},o.options.map(p=>this.form[o.name][p.value]=!1)):this.form[o.name]=null})}},created(){this.services=this.iservices,this.customers=this.icustomers,this.data&&(this.form=this.data),this.ddData&&(this.ddData.name&&(this.form.name=this.ddData.name),this.ddData.service&&(this.service=this.ddData.service,this.services.push(this.service),this.form.service_id=this.service.value,this.service.measurement_fields.map(e=>{e.type=="Checkbox"?(this.form[e.name]={},e.options.map(s=>this.form[e.name][s.value]=!1)):this.form[e.name]=null})),this.ddData.customer&&(this.customer=this.ddData.customer,this.customers=[this.customer],this.form.customer_id=this.customer.value))},methods:{submit(){this.sending=!0;let e={...this.form};if(this.service&&this.service.measurement_fields&&this.service.measurement_fields.length>0){let s=[];this.service.measurement_fields.map((o,p)=>{delete e[o.name];let t={};t[o.name]=o.type=="Checkbox"?JSON.stringify(this.form[o.name]):this.form[o.name],s[p]={...t}}),e.extra_attributes=[...s]}this.modal?(e.ajax=!0,this.$axios.post(this.route("measurements.store"),e).then(s=>{this.sending=!1,this.action(s.data),this.errors={},this.$emit("close")}).catch(s=>{this.sending=!1,s.response.data.errors&&(this.errors=s.response.data.errors)})):this.$inertia.post(this.route("measurements.store"),e,{onFinish:()=>this.sending=!1})},updateFormValue(e,s,o){o?this.form[s][o]=e:this.form[s]=e},searchCustomers(e,s){e&&(s(!0),this.searchingCustomers(s,e,this))},searchingCustomers:A((e,s,o)=>{fetch(o.route("ajax.customers")+"?search="+escape(s)).then(p=>{p.json().then(t=>o.customers=t),e(!1)})},350),searchServices(e,s){e&&(s(!0),this.searchingServices(s,e,this))},searchingServices:A((e,s,o)=>{fetch(o.route("ajax.services")+"?with_fields=1&search="+escape(s)).then(p=>{p.json().then(t=>o.services=t),e(!1)})},350)}},le={class:"w-full ltr:text-left rtl:text-right"},ie={key:0,class:"w-full flex items-start justify-between border-b"},ae={class:"font-bold flex-1 mb-4"},ne={class:"flex items-center"},me=l("svg",{class:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[l("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1),ue=[me],pe={class:"px-8 py-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},de={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},ce={class:"form-label",for:"customer_id"},he={key:0,class:"form-error"},fe={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},ve={class:"form-label",for:"service_id"},be={key:0,class:"form-error"},_e={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},ge={class:"form-label",for:"price"},ye={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},ke={class:"form-label",id:"appointment",for:"appointment"},we={class:"mb-8 ltr:mr-6 rtl:ml-6 flex flex-wrap"},Ve={class:"form-label",for:"name"},Ce=["placeholder"],Se={class:"text-sm mt-1"},$e={key:0,class:"form-error"},xe={key:0,class:"ltr:pr-6 rtl:pl-6 ltr:-mr-12 rtl:-ml-12 w-full"},Ue={class:"font-bold mb-2"},je=l("hr",{class:"mb-8"},null,-1),De={class:"ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 col-span-full grid grid-cols-1 sm:grid-cols-2"},Te=["value"],Be=l("div",{class:"py-2"},null,-1),Fe={key:0,class:"form-error"},Ie=l("div",{class:"py-2"},null,-1),Me={key:0,class:"form-error"};function Ne(e,s,o,p,t,v){var S,$,x,U,j,D,T,B,F,I,M,N,z,L,R;const V=f("v-select"),y=f("text-input"),J=f("select-input"),C=f("textarea-input"),P=f("checkbox-input"),E=f("radio-input"),K=f("loading-button");return i(),a("div",le,[l("div",{class:b(o.modal?"np flex flex-col justify-between items-center px-6 py-4 mb-4 bg-gray-100 border-b rounded-t":"")},[o.modal?(i(),a("div",ie,[l("p",ae,n(e.$t("add_x",{x:e.$tc("Measurement")})),1),l("div",ne,[l("a",{class:"modal-close cursor-pointer z-50",onClick:s[0]||(s[0]=r=>e.$emit("close"))},ue)])])):d("",!0),l("div",{class:b(o.modal?"print bg-white -mx-6 -mb-8 rounded-md":"")},[l("form",{onSubmit:s[7]||(s[7]=ee((...r)=>v.submit&&v.submit(...r),["prevent"])),autocomplete:"off"},[l("div",pe,[l("div",de,[l("label",ce,n(e.$tc("Customer")),1),c(V,{modelValue:t.customer,"onUpdate:modelValue":s[1]||(s[1]=r=>t.customer=r),options:t.customers,"input-id":"customer_id",onSearch:v.searchCustomers,dir:e.$page.props.user.account.direction,placeholder:e.$t("search_x",{x:e.$tc("Customer",2)}),class:b({error:((S=e.$page.props.errors)==null?void 0:S.customer_id)&&(($=e.$page.props.errors)==null?void 0:$.customer_id.length)})},null,8,["modelValue","options","onSearch","dir","placeholder","class"]),(x=e.$page.props.errors)!=null&&x.customer_id?(i(),a("div",he,n((U=e.$page.props.errors)==null?void 0:U.customer_id[0]),1)):d("",!0)]),l("div",fe,[l("label",ve,n(e.$tc("Service")),1),c(V,{modelValue:t.service,"onUpdate:modelValue":s[2]||(s[2]=r=>t.service=r),options:t.services,"input-id":"service_id",onSearch:v.searchServices,dir:e.$page.props.user.account.direction,placeholder:e.$t("search_x",{x:e.$tc("Service",2)}),class:b({error:((j=e.$page.props.errors)==null?void 0:j.service_id)&&((D=e.$page.props.errors)==null?void 0:D.service_id.length)})},null,8,["modelValue","options","onSearch","dir","placeholder","class"]),(T=e.$page.props.errors)!=null&&T.service_id?(i(),a("div",be,n((B=e.$page.props.errors)==null?void 0:B.service_id[0]),1)):d("",!0)]),l("div",_e,[l("label",ge,n(e.$tc("Price")),1),c(y,{type:"number",modelValue:t.form.price,"onUpdate:modelValue":s[3]||(s[3]=r=>t.form.price=r)},null,8,["modelValue"])]),l("div",ye,[l("label",ke,n(e.$tc("Appointment Time")),1),c(y,{type:"datetime-local",pattern:"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}",label:e.$t("Delivery Date"),modelValue:t.form.appointment,"onUpdate:modelValue":s[4]||(s[4]=r=>t.form.appointment=r),errors:(F=e.$page.props.errors)==null?void 0:F.appointment},null,8,["label","modelValue","errors"])]),l("div",we,[l("label",Ve,n(e.$t("Type Name")),1),se(l("input",{id:"name",type:"text","onUpdate:modelValue":s[5]||(s[5]=r=>t.form.name=r),placeholder:e.$t("Type Name"),class:b(["form-input block w-full mt-1 rounded-md border border-gray-300 shadow-sm focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100",{error:((I=e.$page.props.errors)==null?void 0:I.name)&&((M=e.$page.props.errors)==null?void 0:M.name.length)}])},null,10,Ce),[[re,t.form.name]]),l("div",null,[l("div",Se,n(e.$t("Person name with services name i.e, John's Son Blazer, Mike Kurta or Shalini Blouse etc")),1),((N=e.$page.props.errors)==null?void 0:N.name)&&((z=e.$page.props.errors)==null?void 0:z.name.length)?(i(),a("div",$e,n((L=e.$page.props.errors)==null?void 0:L.name[0]),1)):d("",!0)])]),t.service&&t.service.measurement_fields&&t.service.measurement_fields.length?(i(),a("div",xe,[l("h1",Ue,n(e.$tc("Measurement Field",2)),1),je,l("div",De,[(i(!0),a(_,null,g(t.service.measurement_fields,(r,u)=>(i(),a(_,null,[r.type=="Text"?(i(),a("div",{key:"in_"+u},[c(y,{label:r.name,modelValue:t.form[r.name],"onUpdate:modelValue":m=>t.form[r.name]=m,errors:e.$page.props.errors[r.name],class:"ltr:pr-6 rtl:pl-6 pb-8"},null,8,["label","modelValue","onUpdate:modelValue","errors"])])):r.type=="Select"?(i(),a("div",{key:"in_"+u},[c(J,{label:r.name,modelValue:t.form[r.name],"onUpdate:modelValue":m=>t.form[r.name]=m,errors:e.$page.props.errors[r.name],class:"ltr:pr-6 rtl:pl-6"},{default:O(()=>[(i(!0),a(_,null,g(r.options,(m,h)=>(i(),a("option",{key:"o_"+h,value:m.value},n(m.value),9,Te))),128))]),_:2},1032,["label","modelValue","onUpdate:modelValue","errors"])])):r.type=="Textarea"?(i(),a("div",{key:"in_"+u,class:"col-span-full"},[(i(),w(C,{label:r.name,key:"in_"+u,modelValue:t.form[r.name],"onUpdate:modelValue":m=>t.form[r.name]=m,errors:e.$page.props.errors[r.name],class:"ltr:pr-6 rtl:pl-6 pb-8 w-full"},null,8,["label","modelValue","onUpdate:modelValue","errors"]))])):r.type=="Checkbox"?(i(),a("div",{key:"in_"+u},[(i(),a("div",{class:"ltr:text-left rtl:text-right ltr:pr-6 rtl:pl-6 mb-8",key:"in_"+u},[(i(),a("label",{class:"form-label mr-6",key:"in_"+u},n(r.name),1)),Be,(i(!0),a(_,null,g(r.options,(m,h)=>(i(),w(P,{label:m.value,class:"mb-2 w-full",id:"cb_"+h+"_"+u,key:"cb_"+h+"_"+u,errors:e.$page.props.errors[r.name],value:t.form[r.name][m.value],onInput:k=>v.updateFormValue(k,r.name,m.value)},null,8,["label","id","errors","value","onInput"]))),128)),e.$page.props.errors[r.name]&&e.$page.props.errors[r.name].length?(i(),a("div",Fe,n(e.$page.props.errors[r.name][0]),1)):d("",!0)]))])):r.type=="Radio"?(i(),a("div",{key:"in_"+u},[(i(),a("div",{class:"ltr:text-left rtl:text-right ltr:pr-6 rtl:pl-6 mb-8",key:"in_"+u},[(i(),a("label",{class:"form-label mr-6",key:"in_"+u},n(r.name),1)),Ie,(i(!0),a(_,null,g(r.options,(m,h)=>(i(),w(E,{name:r.name,label:m.value,value:m.value,class:"mb-2 w-full mr-6",id:"r_"+h+"_"+u,key:"r_"+h+"_"+u,errors:e.$page.props.errors[r.name],onInput:k=>v.updateFormValue(k,r.name)},null,8,["name","label","value","id","errors","onInput"]))),128)),e.$page.props.errors[r.name]&&e.$page.props.errors[r.name].length?(i(),a("div",Me,n(e.$page.props.errors[r.name][0]),1)):d("",!0)]))])):d("",!0)],64))),256))])])):d("",!0),c(C,{high:"",resize:!o.modal,label:e.$t("Description"),modelValue:t.form.measurement,"onUpdate:modelValue":s[6]||(s[6]=r=>t.form.measurement=r),errors:(R=e.$page.props.errors)==null?void 0:R.measurement,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full"},null,8,["resize","label","modelValue","errors"])]),l("div",{class:b([o.modal?"rounded-b":"","px-8 py-4 bg-gray-100 border-t border-gray-200 flex justify-end items-center"])},[c(K,{type:"submit",class:"btn-gray",loading:t.sending,disabled:t.loading||t.sending},{default:O(()=>[te(n(e.$t("create_x",{x:e.$tc("Measurement")})),1)]),_:1},8,["loading","disabled"])],2)],32)],2)],2)])}const Qe=Z(oe,[["render",Ne]]);export{Qe as default};
