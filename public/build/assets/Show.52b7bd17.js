import{L as x,D as v}from"./Dropdown.8ab47ea2.js";import{S as b}from"./SmsDialog.18ffa5e1.js";import{_ as w,r as u,o as a,c as o,a as e,t as n,b as y,d as l,f as p,h as c,n as k,e as P}from"./app.3213eab3.js";import"./LoadingButton.d8efb122.js";import"./TextareaInput.7882aee3.js";import"./InputError.5e295418.js";const C={components:{Logo:x,Dropdown:v,SmsDialog:b},props:{payment:Object,modal:{default:!0},edit:{type:Function}},metaInfo(){return{title:this.$t("Payment Number",{x:this.payment.id})}},data(){return{sending:!1,emailing:!1,viewsms:!1}},methods:{printPayment(){window.print()},editPayment(){this.$emit("close"),this.$inertia.visit(this.route("payments.edit",this.payment.id))},receivedPayment(){this.payment.received||(this.$emit("close"),this.$inertia.put(this.route("payments.status",this.payment.id),{received:1}))},smsToCustomer(){this.viewsms=!0},emailPayment(){this.sending=!0,this.emailing=!0,console.log("Emailing the order no "+this.payment.id),this.$axios.post(this.route("payments.email",this.payment.id)).then(t=>{this.sending=!1,this.emailing=!1,this.$page.props.flash.message=t.data.success?"Payment has been sent to the customer email address.":"System is unable to sent email, either customer do not have email or system settings are not correct."}).catch(t=>{this.sending=!1,this.emailing=!1,this.$page.props.flash.error="Request has been failed, please check the logs in storage folder and contact developer."})}}},N={key:0,class:"w-full ltr:text-left rtl:text-right"},D={key:0,class:"np flex justify-between items-center px-6 py-4 mb-4 bg-gray-100 border-b rounded-t"},S={class:"font-bold flex-1"},j={class:"flex items-center"},T=e("svg",{class:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1),B=[T],E={class:"print"},L={class:"max-w-2xl h-full py-4 px-6 leading-normal"},M={class:"flex flex-wrap xs:flex-no-wrap justify-around w-full items-start"},V={class:"text-gray-900 mx-auto xs:mx-0",style:{width:"180px"}},$=["alt","src"],q={class:"text-sm px-4 py-4 xs:py-0 text-center xs:text-left"},I={class:"font-extrabold"},R={class:"font-bold"},z={class:"text-sm"},A={class:"flex"},U={class:"text-right ltr:mr-2 rtl:ml-2",style:{width:"90px"}},F={class:"font-bold"},G={class:"flex"},O={class:"text-right ltr:mr-2 rtl:ml-2",style:{width:"90px"}},H={class:"font-bold"},J={class:"inline-block"},K={class:"inline-block"},Q={class:"flex"},W={class:"text-right ltr:mr-2 rtl:ml-2",style:{width:"90px"}},X={class:"font-bold"},Y={key:0,class:"my-6 px-4 py-3 border rounded"},Z=["href"],ee={id:"details",class:"flex flex-wrap xs:flex-no-wrap my-6"},te={id:"company",class:"pr-0 xs:pr-3 w-full xs:max-w-1/2"},se={class:"px-2 py-2 border rounded-t font-bold"},ne={class:"border rounded-b border-t-0 px-2 py-2"},ae={class:"flex"},oe={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},ie={key:0,class:"flex"},le={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},re={class:"flex"},de={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},me={key:1,class:"flex"},ce={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},ye={id:"customer",class:"mt-4 xs:mt-0 pl-0 xs:pl-3 w-full xs:max-w-1/2"},he={class:"px-2 py-2 border rounded-t font-bold"},ue={class:"border rounded-b border-t-0 px-2 py-2"},pe={class:"flex"},_e={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},ge={key:0,class:"flex"},fe={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},xe={class:"flex"},ve={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},be={key:1,class:"flex"},we={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},ke={class:"mt-6 px-4 py-3 border rounded font-bold text-lg"},Pe={class:"border-b pb-4 px-4 -mx-4"},Ce={class:"flex items-center justify-between mt-4"},Ne={class:"text-right"},De={key:0},Se={class:"text-sm flex items-center justify-between mt-4"},je={class:"text-right"},Te={key:0,class:"text-sm flex items-center justify-between mt-1"},Be={class:"text-right"},Ee={key:1,class:"flex items-center mt-4 px-4 py-3 rounded bg-red-500 text-white text-sm"},Le=["href"],Me={key:2,class:"pt-6"},Ve={class:"font-bold"},$e={class:"print-only fixed bottom-0 w-full text-center text-sm text-gray-600 pt-6"},qe={key:1,class:"np block xs:flex items-end justify-between px-6 py-4 mt-4 bg-gray-100 border-t rounded-b"},Ie={class:"m-1 xs:m-0"},Re=["disabled"],ze={key:0,class:"btn-spinner dark ltr:mr-2 rtl:ml-2"},Ae=["disabled"],Ue={key:0,class:"btn-spinner dark ltr:mr-2 rtl:ml-2"};function Fe(t,i,s,Ge,d,m){const h=u("Icons"),_=u("logo"),g=u("SmsDialog"),f=u("Modal");return a(),o("div",null,[s.payment&&s.payment.id?(a(),o("div",N,[s.modal?(a(),o("div",D,[e("p",S,n(t.$t("Payment No",{x:s.payment.id})),1),e("div",j,[s.payment.received?l("",!0):(a(),o("a",{key:0,onClick:i[0]||(i[0]=r=>m.receivedPayment()),class:"modal-close cursor-pointer text-gray-700 hover:text-gray-800"},[y(h,{name:"check2",class:"h-5 w-5 fill-current mr-3"})])),e("a",{class:"modal-close mx-2 cursor-pointer text-gray-700 hover:text-gray-800",onClick:i[1]||(i[1]=r=>m.printPayment())},[y(h,{name:"printer",class:"h-5 w-5 fill-current"})]),e("a",{class:"modal-close mx-2 cursor-pointer text-gray-700 hover:text-gray-800",onClick:i[2]||(i[2]=r=>m.editPayment(s.payment.id))},[y(h,{name:"pencil",class:"h-5 w-5 fill-current"})]),t.$page.props.user.account.sms_enabled&&t.$page.props.user.can_sms?(a(),o("a",{key:1,onClick:i[3]||(i[3]=r=>m.smsToCustomer()),class:"modal-close mx-2 cursor-pointer text-gray-700 hover:text-gray-800"},[y(h,{name:"sms",class:"h-5 w-5 fill-current"})])):l("",!0),e("a",{class:"modal-close ml-2 cursor-pointer",onClick:i[4]||(i[4]=r=>t.$emit("close"))},B)])])):l("",!0),e("div",E,[e("div",L,[e("div",M,[e("div",V,[t.$page.props.user.account.logo_path?(a(),o("img",{key:0,alt:t.$page.props.user.account.name,src:t.$page.props.user.account.logo_path},null,8,$)):(a(),p(_,{key:1}))]),e("div",q,[e("div",I,n(s.payment.account.name),1),e("div",R,n(s.payment.account.phone),1),c(" "+n(s.payment.account.email),1)]),e("div",z,[e("div",A,[e("span",U,n(t.$t("Payment No",{x:s.payment.id}))+": ",1),e("span",F,n(s.payment.id),1)]),e("div",G,[e("span",O,n(t.$t("Date"))+": ",1),e("span",H,[e("span",J,n(t.$date(s.payment.created_at)),1),e("span",K,n(t.$time(s.payment.created_at)),1)])]),e("div",Q,[e("span",W,n(t.$t("Reference"))+": ",1),e("span",X,n(t.$reference(s.payment.reference)),1)])])]),s.payment.account.header?(a(),o("div",Y,n(s.payment.account.header),1)):l("",!0),s.payment.photo_path?(a(),o("a",{key:1,target:"_blank",class:"np w-full block my-6 px-4 py-3 rounded border bg-gray-200 hover:bg-gray-300",href:`/img/${s.payment.photo_path}?ref=${t.$page.props.user?t.$page.props.user.id+"_"+s.payment.hash:s.payment.hash}`},n(t.$t("View Payment Photo")),9,Z)):l("",!0),e("div",ee,[e("div",te,[e("div",se,n(t.$t("Company Details")),1),e("div",ne,[e("div",ae,[e("span",oe,n(t.$t("Name"))+": ",1),e("span",null,[e("strong",null,n(s.payment.account.name),1)])]),s.payment.account.address?(a(),o("div",ie,[e("span",le,n(t.$t("Address"))+": ",1),e("span",null,n(s.payment.account.address),1)])):l("",!0),e("div",re,[e("span",de,n(t.$t("Phone"))+": ",1),e("span",null,n(s.payment.account.phone),1)]),s.payment.account.email?(a(),o("div",me,[e("span",ce,n(t.$t("Email"))+": ",1),e("span",null,n(s.payment.account.email),1)])):l("",!0)])]),e("div",ye,[e("div",he,n(t.$t("Customer Details")),1),e("div",ue,[e("div",pe,[e("span",_e,n(t.$t("Name"))+": ",1),e("span",null,[e("strong",null,n(s.payment.customer.name),1)])]),s.payment.customer.address?(a(),o("div",ge,[e("span",fe,n(t.$t("Address"))+": ",1),e("span",null,n(s.payment.customer.address),1)])):l("",!0),e("div",xe,[e("span",ve,n(t.$t("Phone"))+": ",1),e("span",null,n(s.payment.customer.phone),1)]),s.payment.customer.email?(a(),o("div",be,[e("span",we,n(t.$t("Email"))+": ",1),e("span",null,n(s.payment.customer.email),1)])):l("",!0)])])]),e("div",ke,[e("h1",Pe,n(s.payment.received?t.$t("Payment Note"):t.$t("Payment Request")),1),e("div",Ce,[c(n(t.$t("Amount"))+" ",1),e("div",Ne,n(t.$number(s.payment.amount)),1)]),s.payment.received?(a(),o("div",De,[e("div",Se,[c(n(t.$t("Paid by"))+" ",1),e("div",je,n(t.$capitalize(s.payment.gateway)),1)]),s.payment.gateway_transaction_id?(a(),o("div",Te,[c(n(t.$t("Gateway Transaction Id"))+" ",1),e("div",Be,n(s.payment.gateway_transaction_id),1)])):l("",!0)])):(a(),o("div",Ee,[c(n(t.$t("Payment is not yet received"))+" ",1),s.payment.gateway=="PayU"?(a(),o("a",{key:0,class:"ltr:ml-auto rtl:mr-auto bg-gray-700 hover:bg-gray-800 px-2 py-1 rounded -my-1 -ltr:mr-2 rtl:ml-2 text-center",href:t.route("payu.request",s.payment.id)},n(t.$t("Try again with PayU")),9,Le)):l("",!0)]))]),s.payment.description?(a(),o("div",Me,[e("h4",Ve,n(t.$t("Comment / Note")),1),e("p",null,n(s.payment.description),1)])):l("",!0),s.payment.account.footer?(a(),o("div",{key:3,class:k(["mt-6 px-4 py-3 border rounded",s.modal?"":"mb-3"])},n(s.payment.account.footer),3)):l("",!0),e("div",$e,n(t.$t("This is a computer-generated document. No signature is required.")),1)])]),s.modal?(a(),o("div",qe,[e("div",Ie,[e("button",{type:"button",onClick:i[5]||(i[5]=r=>m.editPayment()),class:"px-4 py-3 text-sm rounded bg-gray-200 hover:bg-gray-400 border ltr:mr-2 rtl:ml-2"},n(t.$t("Edit")),1),t.$page.props.user.account.sms_enabled&&t.$page.props.user.can_sms?(a(),o("button",{key:0,type:"button",disabled:d.sending,onClick:i[6]||(i[6]=r=>m.smsToCustomer()),class:"inline-flex items-center mt-1 px-4 py-3 text-sm rounded bg-gray-200 hover:bg-gray-400 border ltr:mr-2 rtl:ml-2"},[d.sending?(a(),o("div",ze)):l("",!0),c(" "+n(t.$t("SMS")),1)],8,Re)):l("",!0),s.payment.received?l("",!0):(a(),o("button",{key:1,type:"button",disabled:d.sending,onClick:i[7]||(i[7]=r=>m.receivedPayment()),class:"inline-flex items-center mt-1 px-4 py-3 text-sm rounded bg-gray-200 hover:bg-gray-400 border ltr:mr-2 rtl:ml-2"},[d.sending?(a(),o("div",Ue)):l("",!0),c(" "+n(t.$t("Mark as Received")),1)],8,Ae))]),e("button",{type:"button",onClick:i[8]||(i[8]=r=>t.$emit("close")),class:"btn-gray"},n(t.$t("Close")),1)])):l("",!0)])):l("",!0),d.viewsms?(a(),p(f,{key:1,show:d.viewsms,"max-width":"2xl",closeable:!0,onClose:i[10]||(i[10]=r=>d.viewsms=!1)},{default:P(()=>[y(g,{order:s.payment,onClose:i[9]||(i[9]=()=>d.viewsms=!1)},null,8,["order"])]),_:1},8,["show"])):l("",!0)])}const Xe=w(C,[["render",Fe]]);export{Xe as default};
