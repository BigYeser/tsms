import{L as H,D as V}from"./Dropdown.722d56f7.js";import{D as z}from"./Dialog.d35e535e.js";import{M as U}from"./Modal.7d724b71.js";import{S as q}from"./SmsDialog.64dc217d.js";import G from"./Show.9249c07f.js";import{_ as W,r as C,o as p,c as y,a as r,t as d,f as $,e as B,d as x,b as k,h as S,n as D,F as T,j as F}from"./app.cb95741e.js";import"./LoadingButton.3e720a46.js";import"./TextareaInput.757b9ab1.js";import"./InputError.9c3d14d9.js";var A={exports:{}},O={exports:{}};(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h={rotl:function(e,g){return e<<g|e>>>32-g},rotr:function(e,g){return e<<32-g|e>>>g},endian:function(e){if(e.constructor==Number)return h.rotl(e,8)&16711935|h.rotl(e,24)&4278255360;for(var g=0;g<e.length;g++)e[g]=h.endian(e[g]);return e},randomBytes:function(e){for(var g=[];e>0;e--)g.push(Math.floor(Math.random()*256));return g},bytesToWords:function(e){for(var g=[],u=0,c=0;u<e.length;u++,c+=8)g[c>>>5]|=e[u]<<24-c%32;return g},wordsToBytes:function(e){for(var g=[],u=0;u<e.length*32;u+=8)g.push(e[u>>>5]>>>24-u%32&255);return g},bytesToHex:function(e){for(var g=[],u=0;u<e.length;u++)g.push((e[u]>>>4).toString(16)),g.push((e[u]&15).toString(16));return g.join("")},hexToBytes:function(e){for(var g=[],u=0;u<e.length;u+=2)g.push(parseInt(e.substr(u,2),16));return g},bytesToBase64:function(e){for(var g=[],u=0;u<e.length;u+=3)for(var c=e[u]<<16|e[u+1]<<8|e[u+2],f=0;f<4;f++)u*8+f*6<=e.length*8?g.push(t.charAt(c>>>6*(3-f)&63)):g.push("=");return g.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/ig,"");for(var g=[],u=0,c=0;u<e.length;c=++u%4)c!=0&&g.push((t.indexOf(e.charAt(u-1))&Math.pow(2,-2*c+8)-1)<<c*2|t.indexOf(e.charAt(u))>>>6-c*2);return g}};O.exports=h})();var M={utf8:{stringToBytes:function(t){return M.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(M.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var h=[],e=0;e<t.length;e++)h.push(t.charCodeAt(e)&255);return h},bytesToString:function(t){for(var h=[],e=0;e<t.length;e++)h.push(String.fromCharCode(t[e]));return h.join("")}}},N=M;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Q=function(t){return t!=null&&(P(t)||Y(t)||!!t._isBuffer)};function P(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Y(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&P(t.slice(0,0))}(function(){var t=O.exports,h=N.utf8,e=Q,g=N.bin,u=function(c,f){c.constructor==String?f&&f.encoding==="binary"?c=g.stringToBytes(c):c=h.stringToBytes(c):e(c)?c=Array.prototype.slice.call(c,0):!Array.isArray(c)&&c.constructor!==Uint8Array&&(c=c.toString());for(var i=t.bytesToWords(c),w=c.length*8,l=1732584193,s=-271733879,n=-1732584194,o=271733878,a=0;a<i.length;a++)i[a]=(i[a]<<8|i[a]>>>24)&16711935|(i[a]<<24|i[a]>>>8)&4278255360;i[w>>>5]|=128<<w%32,i[(w+64>>>9<<4)+14]=w;for(var _=u._ff,m=u._gg,b=u._hh,v=u._ii,a=0;a<i.length;a+=16){var I=l,R=s,L=n,E=o;l=_(l,s,n,o,i[a+0],7,-680876936),o=_(o,l,s,n,i[a+1],12,-389564586),n=_(n,o,l,s,i[a+2],17,606105819),s=_(s,n,o,l,i[a+3],22,-1044525330),l=_(l,s,n,o,i[a+4],7,-176418897),o=_(o,l,s,n,i[a+5],12,1200080426),n=_(n,o,l,s,i[a+6],17,-1473231341),s=_(s,n,o,l,i[a+7],22,-45705983),l=_(l,s,n,o,i[a+8],7,1770035416),o=_(o,l,s,n,i[a+9],12,-1958414417),n=_(n,o,l,s,i[a+10],17,-42063),s=_(s,n,o,l,i[a+11],22,-1990404162),l=_(l,s,n,o,i[a+12],7,1804603682),o=_(o,l,s,n,i[a+13],12,-40341101),n=_(n,o,l,s,i[a+14],17,-1502002290),s=_(s,n,o,l,i[a+15],22,1236535329),l=m(l,s,n,o,i[a+1],5,-165796510),o=m(o,l,s,n,i[a+6],9,-1069501632),n=m(n,o,l,s,i[a+11],14,643717713),s=m(s,n,o,l,i[a+0],20,-373897302),l=m(l,s,n,o,i[a+5],5,-701558691),o=m(o,l,s,n,i[a+10],9,38016083),n=m(n,o,l,s,i[a+15],14,-660478335),s=m(s,n,o,l,i[a+4],20,-405537848),l=m(l,s,n,o,i[a+9],5,568446438),o=m(o,l,s,n,i[a+14],9,-1019803690),n=m(n,o,l,s,i[a+3],14,-187363961),s=m(s,n,o,l,i[a+8],20,1163531501),l=m(l,s,n,o,i[a+13],5,-1444681467),o=m(o,l,s,n,i[a+2],9,-51403784),n=m(n,o,l,s,i[a+7],14,1735328473),s=m(s,n,o,l,i[a+12],20,-1926607734),l=b(l,s,n,o,i[a+5],4,-378558),o=b(o,l,s,n,i[a+8],11,-2022574463),n=b(n,o,l,s,i[a+11],16,1839030562),s=b(s,n,o,l,i[a+14],23,-35309556),l=b(l,s,n,o,i[a+1],4,-1530992060),o=b(o,l,s,n,i[a+4],11,1272893353),n=b(n,o,l,s,i[a+7],16,-155497632),s=b(s,n,o,l,i[a+10],23,-1094730640),l=b(l,s,n,o,i[a+13],4,681279174),o=b(o,l,s,n,i[a+0],11,-358537222),n=b(n,o,l,s,i[a+3],16,-722521979),s=b(s,n,o,l,i[a+6],23,76029189),l=b(l,s,n,o,i[a+9],4,-640364487),o=b(o,l,s,n,i[a+12],11,-421815835),n=b(n,o,l,s,i[a+15],16,530742520),s=b(s,n,o,l,i[a+2],23,-995338651),l=v(l,s,n,o,i[a+0],6,-198630844),o=v(o,l,s,n,i[a+7],10,1126891415),n=v(n,o,l,s,i[a+14],15,-1416354905),s=v(s,n,o,l,i[a+5],21,-57434055),l=v(l,s,n,o,i[a+12],6,1700485571),o=v(o,l,s,n,i[a+3],10,-1894986606),n=v(n,o,l,s,i[a+10],15,-1051523),s=v(s,n,o,l,i[a+1],21,-2054922799),l=v(l,s,n,o,i[a+8],6,1873313359),o=v(o,l,s,n,i[a+15],10,-30611744),n=v(n,o,l,s,i[a+6],15,-1560198380),s=v(s,n,o,l,i[a+13],21,1309151649),l=v(l,s,n,o,i[a+4],6,-145523070),o=v(o,l,s,n,i[a+11],10,-1120210379),n=v(n,o,l,s,i[a+2],15,718787259),s=v(s,n,o,l,i[a+9],21,-343485551),l=l+I>>>0,s=s+R>>>0,n=n+L>>>0,o=o+E>>>0}return t.endian([l,s,n,o])};u._ff=function(c,f,i,w,l,s,n){var o=c+(f&i|~f&w)+(l>>>0)+n;return(o<<s|o>>>32-s)+f},u._gg=function(c,f,i,w,l,s,n){var o=c+(f&w|i&~w)+(l>>>0)+n;return(o<<s|o>>>32-s)+f},u._hh=function(c,f,i,w,l,s,n){var o=c+(f^i^w)+(l>>>0)+n;return(o<<s|o>>>32-s)+f},u._ii=function(c,f,i,w,l,s,n){var o=c+(i^(f|~w))+(l>>>0)+n;return(o<<s|o>>>32-s)+f},u._blocksize=16,u._digestsize=16,A.exports=function(c,f){if(c==null)throw new Error("Illegal argument "+c);var i=t.wordsToBytes(u(c,f));return f&&f.asBytes?i:f&&f.asString?g.bytesToString(i):t.bytesToHex(i)}})();const Z={metaInfo(){return{title:this.$t("Order Number",{x:this.order.id})}},props:{order:{default:{}},modal:{default:!0},edit:{type:Function}},components:{Logo:H,Dropdown:V,Dialog:z,Modal:U,MeasurementComponent:G,SmsDialog:q},computed:{total_paid:function(){return this.$number(this.order.payments.reduce((t,h)=>t+parseFloat(h.amount),0))}},data(){return{sending:!1,confirm:!1,send_sms:!1,emailing:!1,message:null,dialogButtonText:null,dialogAction:null,dialogTitle:null,dialogBody:null,viewMeasurement:!1}},methods:{showMeasurement(t){fetch(this.route("measurements.show",[t.id,A.exports(t.name)])+"?ajax=1").then(h=>{h.json().then(e=>{this.measurement=e,this.viewMeasurement=!0})})},printOrder(){window.print()},editOrder(){this.$emit("close"),this.$inertia.get(route("orders.edit",this.order.id))},updateStatusNow(t){this.$emit("close"),this.$inertia.put(this.route("orders.status",this.order.id),{status:t})},updateStatus(t){this.order.status=="Completed"?this.message=this.$t("Order is already marked as completed."):(this.dialogButtonText=this.$t("Yes"),this.dialogAction=()=>this.updateStatusNow(t),this.dialogTitle=this.$t("update_status_x",{x:this.$t(t)}),this.dialogBody=this.$t("ask_update_status_x",{x:this.$t(t)}),this.confirm=!0)},smsToCustomer(){this.send_sms=!0},emailOrder(){this.sending=!0,this.emailing=!0,this.$axios.post(this.route("orders.email",this.order.id)).then(t=>{this.sending=!1,this.emailing=!1,this.message=t.data.message||this.$t("System is unable to sent email, either customer do not have email or system settings are not correct.")}).catch(t=>{this.sending=!1,this.emailing=!1,this.message=t.response.data.message||this.$t("Request has been failed, please check the logs in storage folder and contact developer.")})},hide(){this.$emit("close")}}},J={key:0,class:"w-full ltr:text-left rtl:text-right"},K={key:0,class:"np flex justify-between items-center px-6 py-4 mb-4 bg-gray-100 border-b rounded-t"},X={class:"font-bold"},j={class:"flex items-center"},tt={class:"modal-close mx-2 cursor-pointer text-gray-700 hover:text-gray-800"},et={class:"mt-2 py-2 bg-gray-800 rounded text-sm"},rt=["disabled"],st=r("svg",{class:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[r("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1),ot=[st],nt={class:"print"},lt={class:"max-w-2xl h-full py-4 px-6 leading-normal"},it={class:"flex flex-wrap xs:flex-no-wrap justify-around w-full items-center"},at={class:"text-gray-900 mx-auto xs:mx-0",style:{width:"180px"}},dt=["alt","src"],ut={class:"text-sm px-4 py-4 xs:py-0 text-center xs:ltr:text-left rtl:text-right"},ct={class:"font-extrabold"},ht={class:"font-bold"},mt={class:"text-sm"},gt={class:"flex"},ft={class:"ltr:text-right rtl:text-left ltr:mr-2 rtl:ml-2",style:{width:"70px"}},pt={class:"font-bold"},yt={class:"flex"},xt={class:"ltr:text-right rtl:text-left ltr:mr-2 rtl:ml-2",style:{width:"70px"}},bt={class:"font-bold"},_t={class:"inline-block"},vt={class:"inline-block"},wt={class:"flex"},kt={class:"ltr:text-right rtl:text-left ltr:mr-2 rtl:ml-2",style:{width:"70px"}},Ct={class:"font-bold"},St={key:0,class:"my-6 px-4 py-3 border rounded"},Bt={class:"font-extrabold inline-block"},Tt={class:"font-extrabold inline-block"},$t={class:"font-extrabold inline-block"},Ft=["href"],Mt={id:"details",class:"block xs:flex my-6"},Dt={id:"company",class:"ltr:pr-0 rtl:pl-0 xs:ltr:pr-3 xs:rtl:pl-3 w-full xs:max-w-1/2"},Nt={class:"px-2 py-2 border rounded-t font-bold"},At={class:"border rounded-b border-t-0 px-2 py-2"},Ot={class:"flex"},Pt={class:"ltr:text-right rtl:text-left ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},It={key:0,class:"flex"},Rt={class:"ltr:text-right rtl:text-left ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},Lt={class:"flex"},Et={class:"ltr:text-right rtl:text-left ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},Ht={key:1,class:"flex"},Vt={class:"ltr:text-right rtl:text-left ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},zt={id:"customer",class:"mt-4 xs:mt-0 ltr:pl-0 rtl:pr-0 xs:ltr:pl-3 xs:rtl:pr-3 w-full xs:max-w-1/2"},Ut={class:"px-2 py-2 border rounded-t font-bold"},qt={class:"border rounded-b border-t-0 px-2 py-2"},Gt={class:"flex"},Wt={class:"ltr:text-right rtl:text-left ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},Qt={key:0,class:"flex"},Yt={class:"ltr:text-right rtl:text-left ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},Zt={class:"flex"},Jt={class:"ltr:text-right rtl:text-left ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},Kt={key:1,class:"flex"},Xt={class:"ltr:text-right rtl:text-left ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},jt={class:"border rounded leading-tight"},te={class:"px-4 py-3 border-b rounded-t font-bold"},ee={class:"rounded-b overflow-x-auto scroll-on-light"},re={class:"w-full all max-w-full min-w-0"},se={class:"border-b bg-gray-200 px-4 py-2"},oe={class:"border-b bg-gray-200 px-4 py-2 text-center"},ne={class:"border-b bg-gray-200 px-4 py-2 text-center"},le={class:"border-b bg-gray-200 px-4 py-2 text-center"},ie={class:"border-b px-4 py-2"},ae={style:{"min-width":"180px"}},de={class:"text-muted"},ue=["onClick"],ce={class:"border-b px-4 py-2 ltr:text-right rtl:text-left"},he={class:"border-b px-4 py-2 ltr:text-right rtl:text-left"},me={class:"border-b px-4 py-2 ltr:text-right rtl:text-left"},ge={colspan:"3",class:"border-b px-4 py-2 bg-gray-200 ltr:text-right rtl:text-left"},fe={class:"border-b px-4 py-2 bg-gray-200 ltr:text-right rtl:text-left"},pe={key:0},ye={class:"border-b px-4 py-2 bg-gray-200 ltr:text-right rtl:text-left",colspan:"3"},xe={class:"border-b px-4 py-2 bg-gray-200 ltr:text-right rtl:text-left"},be={class:"border-b px-4 py-2 bg-gray-200 ltr:text-right rtl:text-left",colspan:"3"},_e={class:"border-b px-4 py-2 bg-gray-200 ltr:text-right rtl:text-left"},ve={key:2},we={class:"border-b px-4 py-2 bg-gray-200 ltr:text-right rtl:text-left",colspan:"3"},ke={class:"border-b px-4 py-2 bg-gray-200 ltr:text-right rtl:text-left"},Ce={class:"border-b px-4 py-2 bg-gray-200 ltr:text-right rtl:text-left font-normal",colspan:"3"},Se={class:"border-b px-4 py-2 bg-gray-200 ltr:text-right rtl:text-left font-normal"},Be={class:"border-b px-4 py-2 bg-gray-200 ltr:text-right rtl:text-left",colspan:"3"},Te={class:"border-b px-4 py-2 bg-gray-200 ltr:text-right rtl:text-left"},$e={class:"pt-6"},Fe={class:"font-bold"},Me={class:"print-only mt-auto w-full text-center text-sm text-gray-600 pt-6"},De={key:1,class:"np block xs:flex items-end justify-between px-6 py-4 mt-4 bg-gray-100 border-t rounded-b"},Ne={class:"m-1 xs:m-0"},Ae=["disabled"],Oe={key:0,class:"btn-spinner dark ltr:mr-2 rtl:ml-2"},Pe=["disabled"],Ie={key:0,class:"btn-spinner dark ltr:mr-2 rtl:ml-2"},Re={class:"flex items-center cursor-pointer select-none group px-4 py-3 text-sm rounded bg-gray-200 hover:bg-gray-400 border ltr:mr-2 rtl:ml-2"},Le={class:"mb-2 py-2 bg-gray-800 rounded text-sm"};function Ee(t,h,e,g,u,c){var _;const f=C("Icons"),i=C("Dropdown"),w=C("logo"),l=C("dropdown"),s=C("MeasurementComponent"),n=C("Modal"),o=C("SmsDialog"),a=C("Dialog");return e.order&&e.order.id?(p(),y("div",J,[e.modal?(p(),y("div",K,[r("p",X,d(t.$t("Order Number",{x:e.order.id})),1),r("div",j,[e.order.status!="Completed"&&(t.$page.props.user.edit_all||t.$page.props.user.id==((_=e.order.user)==null?void 0:_.id))?(p(),$(i,{key:0,placement:"bottom-end"},{dropdown:B(()=>[r("div",et,[r("button",{type:"button",onClick:h[0]||(h[0]=m=>c.updateStatus("Preparing")),class:"block w-full ltr:text-left rtl:text-right px-6 py-3 text-white hover:bg-gray-900 hover:text-white"},d(t.$t("mark_as_x",{x:t.$t("Preparing")})),1),r("button",{type:"button",onClick:h[1]||(h[1]=m=>c.updateStatus("Ready")),class:"block w-full ltr:text-left rtl:text-right px-6 py-3 text-white hover:bg-gray-900 hover:text-white"},d(t.$t("mark_as_x",{x:t.$t("Ready")})),1),r("button",{type:"button",onClick:h[2]||(h[2]=m=>c.updateStatus("Completed")),class:"block w-full ltr:text-left rtl:text-right px-6 py-3 text-white hover:bg-gray-900 hover:text-white"},d(t.$t("mark_as_x",{x:t.$t("Completed")})),1)])]),default:B(()=>[r("div",tt,[k(f,{class:"w-5 h-5 fill-current",name:"scissors"})])]),_:1})):x("",!0),r("a",{onClick:h[3]||(h[3]=m=>c.printOrder()),class:"modal-close mx-2 cursor-pointer text-gray-700 hover:text-gray-800"},[k(f,{name:"printer",class:"h-5 w-5 fill-current"})]),t.$page.props.user.edit_all||t.$page.props.user.id==e.order.user.id?(p(),y("a",{key:1,onClick:h[4]||(h[4]=m=>c.editOrder(e.order.id)),class:"modal-close mx-2 cursor-pointer text-gray-700 hover:text-gray-800"},[k(f,{name:"pencil",class:"h-5 w-5 fill-current"})])):x("",!0),t.$page.props.user.account.sms_enabled&&(t.$page.props.user.can_sms||t.$page.props.user.owner)?(p(),y("a",{key:2,onClick:h[5]||(h[5]=m=>c.smsToCustomer()),class:"modal-close mx-2 cursor-pointer text-gray-700 hover:text-gray-800"},[k(f,{name:"sms",class:"h-5 w-5 fill-current"})])):x("",!0),r("button",{type:"button",disabled:u.emailing,onClick:h[6]||(h[6]=m=>c.emailOrder()),class:"modal-close mx-2 cursor-pointer text-gray-700 hover:text-gray-800"},[k(f,{name:"email",class:"h-5 w-5 fill-current"})],8,rt),r("a",{class:"modal-close ml-2 cursor-pointer",onClick:h[7]||(h[7]=m=>c.hide())},ot)])])):x("",!0),r("div",nt,[r("div",lt,[r("div",it,[r("div",at,[t.$page.props.user.account.logo_path?(p(),y("img",{key:0,alt:t.$page.props.user.account.name,src:t.$page.props.user.account.logo_path},null,8,dt)):(p(),$(w,{key:1}))]),r("div",ut,[r("div",ct,d(e.order.account.name),1),r("div",ht,d(e.order.account.phone),1),S(" "+d(e.order.account.email),1)]),r("div",mt,[r("div",gt,[r("span",ft,d(t.$t("Order No"))+":",1),r("span",pt,d(e.order.id),1)]),r("div",yt,[r("span",xt,d(t.$t("Date"))+":",1),r("span",bt,[r("span",_t,d(t.$date(e.order.created_at)),1),r("span",vt,d(t.$time(e.order.created_at)),1)])]),r("div",wt,[r("span",kt,d(t.$t("Reference"))+":",1),r("span",Ct,d(t.$reference(e.order.reference)),1)])])]),e.order.account.header?(p(),y("div",St,d(e.order.account.header),1)):x("",!0),r("div",{class:D(["my-6 px-4 py-3 rounded text-sm flex justify-between",{"bg-gray-200":e.order.status==t.$t("Received"),"bg-indigo-200":e.order.status==t.$t("Preparing"),"bg-green-200":e.order.status==t.$t("Ready"),"bg-green-700 text-white":e.order.status==t.$t("Completed")}])},[r("div",null,[S(d(t.$t("Priority"))+": ",1),r("span",Bt,d(e.order.priority==3?t.$t("Urgent"):e.order.priority==2?t.$t("High"):t.$t("Normal")),1)]),r("div",null,[S(d(t.$t("Status"))+": ",1),r("span",Tt,d(e.order.status),1)]),r("div",null,[S(d(t.$t("Delivery Date"))+": ",1),r("span",$t,d(t.$date(e.order.delivery_date)),1)])],2),e.order.photo_path?(p(),y("a",{key:1,target:"_blank",class:"np w-full block my-6 px-4 py-3 rounded border bg-gray-200 hover:bg-gray-300",href:`/img/${e.order.photo_path}?ref=${t.$page.props.user?t.$page.props.user.id+"_"+e.order.hash:e.order.hash}`},d(t.$t("View Order Photo")),9,Ft)):x("",!0),r("div",Mt,[r("div",Dt,[r("div",Nt,d(t.$t("Company Details")),1),r("div",At,[r("div",Ot,[r("span",Pt,d(t.$t("Name"))+":",1),r("span",null,[r("strong",null,d(e.order.account.name),1)])]),e.order.account.address?(p(),y("div",It,[r("span",Rt,d(t.$t("Address"))+":",1),r("span",null,d(e.order.account.address),1)])):x("",!0),r("div",Lt,[r("span",Et,d(t.$t("Phone"))+":",1),r("span",null,d(e.order.account.phone),1)]),e.order.account.email?(p(),y("div",Ht,[r("span",Vt,d(t.$t("Email"))+":",1),r("span",null,d(e.order.account.email),1)])):x("",!0)])]),r("div",zt,[r("div",Ut,d(t.$t("Customer Details")),1),r("div",qt,[r("div",Gt,[r("span",Wt,d(t.$t("Name"))+":",1),r("span",null,[r("strong",null,d(e.order.customer.name),1)])]),e.order.customer.address?(p(),y("div",Qt,[r("span",Yt,d(t.$t("Address"))+":",1),r("span",null,d(e.order.customer.address),1)])):x("",!0),r("div",Zt,[r("span",Jt,d(t.$t("Phone"))+":",1),r("span",null,d(e.order.customer.phone),1)]),e.order.customer.email?(p(),y("div",Kt,[r("span",Xt,d(t.$t("Email"))+":",1),r("span",null,d(e.order.customer.email),1)])):x("",!0)])])]),r("div",jt,[r("p",te,d(t.$tc("Service",2)),1),r("div",ee,[r("table",re,[r("thead",null,[r("tr",null,[r("th",se,d(t.$t("Item / Details")),1),r("th",oe,d(t.$t("Price")),1),r("th",ne,d(t.$t("Qty")),1),r("th",le,d(t.$t("Amount")),1)])]),r("tbody",null,[(p(!0),y(T,null,F(e.order.services,m=>(p(),y("tr",{key:"service_"+m.id},[r("td",ie,[r("div",ae,[r("div",null,d(m.name)+" ("+d(m.code)+")",1),r("div",null,[r("small",de,[S(d(t.$tc("Measurement"))+": ",1),r("button",{class:"text-indigo-600 hover:fonr-bold",onClick:b=>c.showMeasurement(m.measurement)},d(m.measurement.name),9,ue)])])])]),r("td",ce,d(t.$number(m.price)),1),r("td",he,d(t.$number(m.qty)),1),r("td",me,d(t.$number(m.amount)),1)]))),128))]),r("tfoot",null,[r("tr",null,[r("th",ge,d(t.$t("Total")),1),r("th",fe,d(t.$number(e.order.total)),1)]),e.order.discount?(p(),y("tr",pe,[r("th",ye,d(t.$t("Discount")),1),r("th",xe,d(t.$number(e.order.discount_amount)),1)])):x("",!0),e.order.taxes.length?(p(!0),y(T,{key:1},F(e.order.taxes,(m,b)=>(p(),y("tr",{key:"tr_"+b},[r("th",be,d(m.name),1),r("th",_e,d(t.$number(m.pivot.total_amount)),1)]))),128)):x("",!0),e.order.taxes.length||e.order.discount?(p(),y("tr",ve,[r("th",we,d(t.$t("Grand Total")),1),r("th",ke,d(t.$number(e.order.grand_total)),1)])):x("",!0),e.order.payments.length?(p(),y(T,{key:3},[(p(!0),y(T,null,F(e.order.payments,(m,b)=>(p(),y("tr",{key:"payment_"+b},[r("th",Ce,d(t.$tc("Payment"))+" ("+d(t.$date(m.date))+") ",1),r("th",Se,d(t.$number(m.amount)),1)]))),128)),r("tr",null,[r("th",Be,d(t.$t("Balance")),1),r("th",Te,d(t.$number(e.order.grand_total-this.total_paid)),1)])],64)):x("",!0)])])])]),r("div",$e,[r("h4",Fe,d(t.$t("Comment / Note")),1),r("p",null,d(e.order.note),1)]),e.order.account.footer?(p(),y("div",{key:2,class:D(["mt-6 px-4 py-3 border rounded",e.modal?"":"mb-3"])},d(e.order.account.footer),3)):x("",!0),r("div",Me,d(t.$t("This is a computer-generated document. No signature is required.")),1)])]),e.modal?(p(),y("div",De,[r("div",Ne,[t.$page.props.user.edit_all||t.$page.props.user.id==e.order.user.id?(p(),y("button",{key:0,onClick:h[8]||(h[8]=m=>c.editOrder()),class:"px-4 py-3 text-sm rounded bg-gray-200 hover:bg-gray-400 border ltr:mr-2 rtl:ml-2"},d(t.$t("Edit")),1)):x("",!0),t.$page.props.user.account.sms_enabled&&(t.$page.props.user.can_sms||t.$page.props.user.owner)?(p(),y("button",{key:1,disabled:u.sending,onClick:h[9]||(h[9]=m=>c.smsToCustomer()),class:"inline-flex items-center mt-1 px-4 py-3 text-sm rounded bg-gray-200 hover:bg-gray-400 border ltr:mr-2 rtl:ml-2"},[u.sending?(p(),y("div",Oe)):x("",!0),S(" "+d(t.$t("SMS")),1)],8,Ae)):x("",!0),r("button",{disabled:u.sending,onClick:h[10]||(h[10]=m=>c.emailOrder()),class:"inline-flex items-center mt-1 px-4 py-3 text-sm rounded bg-gray-200 hover:bg-gray-400 border ltr:mr-2 rtl:ml-2"},[u.sending?(p(),y("div",Ie)):x("",!0),S(" Notify ")],8,Pe),e.order.status!="Completed"&&(t.$page.props.user.edit_all||t.$page.props.user.id==e.order.user.id)?(p(),$(l,{key:2,class:"mt-1",placement:"top-start"},{dropdown:B(()=>[r("div",Le,[r("button",{type:"button",onClick:h[11]||(h[11]=m=>c.updateStatus("Completed")),class:"block w-full ltr:text-left rtl:text-right px-6 py-3 text-white hover:bg-gray-900 hover:text-white"},d(t.$t("mark_as_x",{x:t.$t("Completed")})),1),r("button",{type:"button",onClick:h[12]||(h[12]=m=>c.updateStatus("Ready")),class:"block w-full ltr:text-left rtl:text-right px-6 py-3 text-white hover:bg-gray-900 hover:text-white"},d(t.$t("mark_as_x",{x:t.$t("Ready")})),1),r("button",{type:"button",onClick:h[13]||(h[13]=m=>c.updateStatus("Preparing")),class:"block w-full ltr:text-left rtl:text-right px-6 py-3 text-white hover:bg-gray-900 hover:text-white"},d(t.$t("mark_as_x",{x:t.$t("Preparing")})),1)])]),default:B(()=>[r("div",Re,[S(d(t.$t("Status"))+" ",1),k(f,{class:"w-2 h-2 fill-current ml-2",name:"cheveron-up"})])]),_:1})):x("",!0)]),r("button",{onClick:h[14]||(h[14]=m=>c.hide()),class:"btn-gray"},d(t.$t("Close")),1)])):x("",!0),k(n,{show:u.viewMeasurement,"max-width":"2xl",closeable:!0,onClose:h[16]||(h[16]=m=>u.viewMeasurement=!1)},{default:B(()=>{var m;return[k(s,{measurement:t.measurement,onClose:h[15]||(h[15]=()=>u.viewMeasurement=!1),notify:e.order.customer.id!=((m=t.measurement)==null?void 0:m.customer.id)},null,8,["measurement","notify"])]}),_:1},8,["show"]),k(n,{show:u.send_sms,"max-width":"sm",closeable:!1,onClose:h[18]||(h[18]=m=>u.send_sms=!1)},{default:B(()=>[k(o,{order:e.order,onClose:h[17]||(h[17]=()=>u.send_sms=!1)},null,8,["order"])]),_:1},8,["show"]),k(a,{show:u.message,content:u.message,close:()=>u.message=null},null,8,["show","content","close"]),k(a,{show:u.confirm,close:()=>u.confirm=!1,"action-text":u.dialogButtonText,action:u.dialogAction,title:u.dialogTitle,content:u.dialogBody},null,8,["show","close","action-text","action","title","content"])])):x("",!0)}const Ze=W(Z,[["render",Ee]]);export{Ze as default};
