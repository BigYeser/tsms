import{p as V}from"./pickBy.0e256710.js";import{t as C}from"./throttle.a82b52d6.js";import{S as $,m as j}from"./SearchFilter.69f906db.js";import{L as M}from"./Layout.b8e988a4.js";import{M as P}from"./Modal.9111f8ad.js";import S from"./Show.301cb850.js";import{P as N}from"./Pagination.39902106.js";import{_ as B,r as i,o as d,c,a as t,t as o,b as r,e as p,F as L,j as T,d as f,h as y,f as w}from"./app.130018a4.js";import"./debounce.6529b7c6.js";import"./Dropdown.d3c762fb.js";import"./FlashMessages.4c4dd942.js";import"./SmsDialog.d8d14266.js";import"./LoadingButton.dfafcc30.js";import"./TextareaInput.cb9f21c5.js";import"./InputError.9a5d9be6.js";const I={layout:M,components:{Pagination:N,SearchFilter:$,Modal:P,ShowPayment:S},props:{payments:Object,filters:Object,message:String},metaInfo(){return{title:this.$tc("Payment",2)}},data(){return{form:{search:this.filters.search,gateway:this.filters.gateway,trashed:this.filters.trashed,received:this.filters.received},gateways:[],payment:null,viewModal:!1}},watch:{form:{handler:C(function(){let e=V(this.form);this.$inertia.replace(this.route("payments",Object.keys(e).length?e:{remember:"forget"}))},250),deep:!0}},created(){this.gateways=this.$page.props.user.account.gateways.split(",").map(e=>({value:e,label:e})),this.gateways.unshift({value:"",label:this.$t("All")})},methods:{rowClicked(e){fetch(this.route("payments.ajax",e)).then(l=>{l.json().then(n=>{this.payment=n,this.viewModal=!0})})},reset(){this.form=j(this.form,()=>null)},getCustomer(e){var l=null;return this.$axios.get(this.route("customer.get",e)).then(n=>{n.json().then(_=>{l=_})}),l.name}}},O={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},R={class:"np mb-6 flex justify-between items-center"},U={class:"block text-gray-700"},A={class:"mt-4 block text-gray-700"},F={class:"mt-4 block text-gray-700"},D={class:"inline md:hidden"},G={class:"hidden md:inline"},q={class:"bg-white rounded shadow leading-normal overflow-x-auto scroll-on-light"},E={class:"w-full whitespace-no-wrap"},W={class:"text-left font-bold"},z={class:"px-6 pt-6 pb-4"},H={class:"px-6 pt-6 pb-4"},J=t("th",{class:"px-6 pt-6 pb-4"},"Gateway",-1),K={class:"px-6 pt-6 pb-4",colspan:"2"},Q=["onClick"],X={class:"border-t px-6 py-4"},Y={class:"flex items-center"},Z=t("br",null,null,-1),ee={class:"border-t px-6 py-4"},te={class:"border-t px-6 py-4"},se={class:"ltr:mr-2 rtl:ml-2"},oe={class:"text-right font-bold flex items-center justify-end"},le={class:"border-t px-6 py-4 text-center"},ae={class:"border-t px-6 py-4 max-w-lg truncate"},re={class:"border-t px-6 py-4 w-8"},ne={key:0},ie={class:"border-t px-6 py-4",colspan:"5"};function de(e,l,n,_,a,h){const u=i("v-select"),b=i("search-filter"),m=i("Icons"),g=i("Link"),v=i("pagination"),k=i("ShowPayment"),x=i("Modal");return d(),c("div",null,[t("div",null,[t("h1",O,o(e.$tc("Payment",2)),1),t("div",R,[r(b,{modelValue:a.form.search,"onUpdate:modelValue":l[3]||(l[3]=s=>a.form.search=s),class:"w-full max-w-md ltr:mr-4 rtl:ml-4",onReset:h.reset},{default:p(()=>[t("label",U,o(e.$t("Status")),1),r(u,{modelValue:a.form.received,"onUpdate:modelValue":l[0]||(l[0]=s=>a.form.received=s),options:[{value:"",label:"All"},{value:"yes",label:e.$t("Received")},{value:"no",label:e.$t("Not received yet")}],reduce:s=>s.value},null,8,["modelValue","options","reduce"]),t("label",A,o(e.$t("Gateway")),1),r(u,{options:a.gateways,modelValue:a.form.gateway,"onUpdate:modelValue":l[1]||(l[1]=s=>a.form.gateway=s),reduce:s=>s.value},null,8,["options","modelValue","reduce"]),t("label",F,o(e.$t("Trashed")),1),r(u,{modelValue:a.form.trashed,"onUpdate:modelValue":l[2]||(l[2]=s=>a.form.trashed=s),options:[{value:"",label:"Not Trashed"},{value:"with",label:e.$t("With Trashed")},{value:"only",label:e.$t("Only Trashed")}],reduce:s=>s.value},null,8,["modelValue","options","reduce"])]),_:1},8,["modelValue","onReset"]),r(g,{class:"btn-gray",href:e.route("payments.new")},{default:p(()=>[t("span",D,[r(m,{name:"add",class:"w-4 h-4 fill-white group-hover:fill-white"})]),t("span",G,o(e.$t("create_x",{x:e.$tc("Payment")})),1)]),_:1},8,["href"])]),t("div",q,[t("table",E,[t("thead",null,[t("tr",W,[t("th",z,o(e.$t("Created at")),1),t("th",H,o(e.$t("Amount")),1),J,t("th",K,o(e.$t("Description")),1)])]),t("tbody",null,[(d(!0),c(L,null,T(n.payments.data,s=>(d(),c("tr",{key:s.id,onClick:me=>h.rowClicked(s.id),class:"cursor-pointer hover:bg-teal-200 focus-within:bg-teal-200"},[t("td",X,[t("div",Y,[y(o(e.$date(s.date))+" ",1),Z,y(o(e.$t("Ref"))+": "+o(s.reference)+" ",1),s.deleted_at?(d(),w(m,{key:0,name:"trash",class:"flex-shrink-0 w-3 h-3 fill-gray-400 ml-2"})):f("",!0)])]),t("td",ee,o(e.$payment)+" "+o(h.getCustomer(e.$payment.customer_id)),1),t("td",te,[t("div",se,o(s.gateway),1),t("div",oe,[s.received?(d(),w(m,{key:0,name:"check",class:"flex-shrink-0 w-3 h-3 fill-green-600 ltr:mr-2 rtl:ml-2"})):f("",!0),y(" "+o(e.$number(s.amount)),1)])]),t("td",le,o(s.gateway),1),t("td",ae,o(s.description),1),t("td",re,[r(m,{name:"cheveron-right",class:"block w-6 h-6 fill-gray-400 rtl:rotate"})])],8,Q))),128)),n.payments.data.length===0?(d(),c("tr",ne,[t("td",ie,o(e.$t("no_x_found",{x:e.$tc("Payment")})),1)])):f("",!0)])])]),r(v,{links:n.payments.links,meta:n.payments.meta},null,8,["links","meta"])]),r(x,{show:a.viewModal,"max-width":"2xl",closeable:!0,onClose:l[5]||(l[5]=()=>a.viewModal=!1)},{default:p(()=>[r(k,{payment:a.payment,onClose:l[4]||(l[4]=()=>a.viewModal=!1)},null,8,["payment"])]),_:1},8,["show"])])}const $e=B(I,[["render",de]]);export{$e as default};
